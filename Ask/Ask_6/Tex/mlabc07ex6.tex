\documentclass[a4paper,10pt]{article} \usepackage{anysize}
\marginsize{2cm}{2cm}{1cm}{1cm}
%\textwidth 6.0in \textheight = 664pt
\usepackage{xltxtra}
\usepackage{xunicode} \usepackage{graphicx}
\usepackage{color} \usepackage{xgreek} \usepackage{fancyvrb}
\usepackage{minted}
\usepackage{listings}
\usepackage{enumitem} \usepackage{framed} \usepackage{relsize}
\usepackage{float} 
\setmainfont[Mapping=tex-text]{CMU Serif}
\begin{document}

\include{title/title}

\section*{} 
\subsection*{Άσκηση (i)}
Σε αυτή την άσκηση ζητείται αρχικά να φτιάξουμε δύο ρουτίνες, μία που να
επιστρέφει τους ascii τιμές του δεκαεξαδικού αριθμού που υπάρχει στον al και
μία που να επιστρέφει τον αριθμό στον al, όταν δέχεται ως έισοδο τις ascii
τιμές στον ax (στον ah ο ascii των τεσσάρων MSB bits και στον al των τεσσάρων
LSB bits). Γι' αυτό το σκοπό στην πρώτη περίπτωση απομονώνουμε ανά τετράδες τα
ψηφία και ανάλογα με το αν ο αριθμός είναι μεγαλύτερος ή μικρότερος του 10
επιστρέφουμε την αντίστοιχη ascii τιμή. Στη δεύτερη ρουτίνα βρίσκουμε από την
ascii τιμή τον αριθμό που αντιστοιχεί και αφού πολλαπλασιάσουμε τον MSB αριθμό
επί 16, τον προσθέτουμε στον LSB αριθμό. Έπειτα φτιάξαμε μια βιβλιοθήκη -ένα
αρχείο ``lib.inc" - που περιλαμβάνει όλες τις ρουτίνες που χρειαζόμαστε στο
πρόγραμμα, βάζοντας τις κατάλληλες δηλώσεις των ρουτινών αλλά και τις
αντίστοιχες εντολές στο κυρίως πρόγραμμα ώστε να συμπεριλάβουμε τη βιβλιοθήκη.
Ακόμη συμπεριλάβαμε το αρχείο ``macros.txt" όπου βάλαμε τις μακροεντολές
που χρειαστήκαμε.  Στο κυρίως πρόγραμμα διαβάζουμε τους δεκαεξαδικούς αριθμούς
που δίνει ο χρήστης, μετρώντας κάθε φορά τα ψηφία ώστε να μπορούμε να
``φτιάξουμε" τον αριθμό που αντιστοιχεί σ' αυτή την παράσταση, ακόμα διαβάζουμε
την πράξη που θα εκτελέσουμε (πρόσθεση ή αφαίρεση) και σταματάμε με το
<enter>. Στην πρόσθεση μπορεί να έχουμε υπερχείλιση, γεγονός που ελέγχουμε και
στην αφαίρεση χρειάζεται να ελέγξουμε ποιο από τα δύο ορίσματα είναι
μεγαλύτερο (σε unsigned παράσταση) ώστε σε κάθε περίπτωση να εκτυπώσουμε ή όχι
το ``-" και να αφαιρέσουμε από το μεγαλύτερο το μικρότερο αριθμό.\\[0.5cm]

\noindent Κυρίως κώδικας:
\inputminted[linenos,obeytabs,fontsize=\footnotesize]{nasm}{files/lib.inc}
\noindent Κυρίως κώδικας εκτελέσιμου:
\inputminted[linenos,obeytabs,fontsize=\footnotesize]{nasm}{files/1.asm}
\noindent Τα macros που χρησιμοποιήσαμε:
\inputminted[linenos,obeytabs,fontsize=\footnotesize]{nasm}{files/1.txt}
\subsection*{Άσκηση (ii)}

 Στο μέρος αυτό πραγματοποιήσαμε την μετατροπή του PC σε τερματικό. Γι'αυτόν
 τον σκοπό δεχόμαστε χαρακτήρες από την θύρα RS232 και
 στέλνουμε τους χαρακτήρες που πληκτρολογούνται στην ίδια θύρα. Ουσιαστικά
 έχουμε επικοινωνία μεταξύ δύο τερματικών, όπου ό,τι γράφουμε στην πλευρά
 αποστολής του ενός το λαμβάνουμε στην πλευρά λήψης του άλλου.
 Η procedure RXCH\_RS232 λαμβάνει έναν χαρακτήρα από
 την είσοδο (αν έχει σταλεί) και τον καταχωρεί στον AL. Αν δεν έχουμε νέο
 χαρακτήρα αποθηκεύει στον AL το 0. Αντίστοιχα η procedure TXCH\_RS232
 στέλνει τον χαρακτήρα που θέλουμε στην εν λόγω θύρα, από τον ίδιο
 καταχωρητή (AL). Αν δεν έχουμε κάποιον χαρακτήρα να στείλουμε τότε βάζουμε στον AL
 το 0.

 Όσον αφορά τον χωρισμό της οθόνης, έγινε κάθετα. Θεωρήσαμε τις
 ``συντεταγμένες" του μέσου της οθόνης και πάντα στην ίδια στήλη τυπώνουμε τον
 χαρακτήρα ``|" (με ascii κωδικό τον 179) μέσα σε ένα loop.
 Αναφορικά με την χρήση του πληκτρολογίου, ο χρήστης πραγματοποιεί έξοδο από
 το περιβάλλον πατώντας το πλήκτρο escape. Επίσης αν πατήσει `Υ' έχουμε
 λειτουργία echo, δηλαδή όσα γράφει τυπώνονται και στην οθόνη, αλλιώς με `N'
 δεν έχουμε echo. Αυτό περιέχεται στην ρουτίνα read\_echo. Ακόμη με τα πλήκτρα
 `1' έως `6' διαλέγει τον ρυθμό επικοινωνίας (baud rate) για τις τιμές 300,
 600, 1200, 2400, 4800, και 9600 αντίστοιχα, στην ρουτίνα read\_br.
 Τέλος, παραθέτουμε το αρχείο με τις μακροεντολές μας. Οι μακροεντολές
 move\_there και move\_there\_cx χρησιμοποιήθηκαν για τη μετάβαση του κέρσορα
 στις επιλεγμένες συντεταγμένες της οθόνης τόσο για την σωστή τοποθέτηση του 
 χαρακτήρα ``|" και όσο και για την εκτύπωση στα δύο ``παράθυρα" του
 τερματικού, καθώς και η μακροεντολή scroll προφανώς για το scroll.\\[0.5cm]

\noindent Κυρίως κώδικας:
\inputminted[linenos,obeytabs,fontsize=\footnotesize]{nasm}{files/2.asm}
Τα macros που χρησιμοποιήσαμε:
\inputminted[linenos,obeytabs,fontsize=\footnotesize]{nasm}{files/2.txt}

\end{document}
