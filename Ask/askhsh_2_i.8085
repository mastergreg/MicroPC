START:	
	LDA 2000H
	MOV D,A
	RRC
	RRC
	RRC
	RRC
	ANI 0FH
	MOV E,A
	;E has MSB needed for ANAMMA
	MOV A,D
	ANI 0FH
	MOV D,A
	;D has LSB needed for SBHSIMO
	CALL ANAMMA
	CALL SBHSIMO
	JMP START
ANAMMA:
	LXI B,0000H
	LXI H,0000H
	MOV C,E
	CALL SHIFTBC
	CALL SHIFTBC
	DAD B
	CALL SHIFTBC
	CALL SHIFTBC
	CALL SHIFTBC
	DAD B
	CALL SHIFTBC
	DAD B ;HL has the needed delay
	MOV C,L
	MOV B,H
	;need to turn on the led(s)
	CALL ONN
	CALL DELB
	RET

SBHSIMO:
	LXI B,0000H
	LXI H,0000H
	MOV C,D
	CALL SHIFTBC
	CALL SHIFTBC
	DAD B
	CALL SHIFTBC
	CALL SHIFTBC
	CALL SHIFTBC
	DAD B
	CALL SHIFTBC
	DAD B ;HL has the needed delay
	MOV C,L
	MOV B,H
	;need to turn on the led(s)
	CALL OFF
	CALL DELB
	RET
SHIFTBC: ;shifts BC a bit to the left :)
	MOV A,C
	RAL
	CC ROTC
	CNC ROTNC
	RET

ROTNC:
	MOV C,A
	MOV A,B
	RLC
	MOV B,A
	RET	
ROTC:
	MOV C,A
	MOV A,B
	RLC
	MOV B,A
	INR B
	RET
ONN:
	MVI A,00H
	STA 3000H
	RET
OFF:
	MVI A,FFH
	STA 3000H
	RET


END


