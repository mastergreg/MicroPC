IN 10H
	MVI E,00H
	MVI D,00H
START:
	CALL CHECK_INPT
	CALL MDELAY
	CALL SHOW_COUNTERS
	CALL INC_COUNT
	CALL SHOW_COUNTERS
	JMP START

CHECK_INPT:
	LDA 2000H
	RAL
	CC DIAKOPH
	RET

SHOW_COUNTERS:
	MOV A,D
	RAL
	RAL
	RAL
	RAL
	ADD E
	CMA
	STA 3000H
	RET
MDELAY:
	CALL MINI_DELAY
	CALL CHECK_INPT
	CALL MINI_DELAY
	CALL CHECK_INPT
	RET

MINI_DELAY:
	DI
	LXI B,0032H
	PUSH B
	PUSH D
	CALL DELB
	POP D
	POP B
	RET

INC_COUNT:
	MOV A,E
	INR A
	ANI 0FH
	MOV E,A
	RET

INC_INTR:
	MVI H,00H
	MOV A,D
	INR A
	ANI 0FH
	MOV D,A
	RET

DIAKOPH:
	MVI A,0DH
	SIM
	EI
	RET
	
INTR_ROUTINE:
	PUSH B
	PUSH D
	PUSH H
	CALL BEEP
	POP H
	POP D
	POP B
	CALL MINI_DELAY
LP:	RIM 
	RAL
	RAL
	JC LP
	INR H
	MOV A,H
	CPI 02H
	MOV H,A
	JZ INC_INTR
	CALL SHOW_COUNTERS
	EI
	CALL MINI_DELAY
	MVI L,00H
	CALL METRHMA
	RET

MAX_DELAY:
	DI
	LXI B,03E8H
	PUSH H
	PUSH B
	PUSH D
	CALL DELB
	POP D
	POP B
	POP H

AUXHSH:	
	INR L
	RET

METRHMA: 
	LDA 2000H
ARXH:
	RAL
	CC AUXHSH
	RAL 
	CC AUXHSH
	RAL
	CC AUXHSH
	RAL
	CC AUXHSH
	RAL
	CC AUXHSH
	RAL
	CC AUXHSH
	RAL
	CC AUXHSH
	RAL
	CC AUXHSH
	MOV A,L
	RAL
	RAL
	RAL
	RAL
	ADD E
	CMA
	STA 3000H
	CALL MAX_DELAY
	MOV L,A
	EI
	RET
END